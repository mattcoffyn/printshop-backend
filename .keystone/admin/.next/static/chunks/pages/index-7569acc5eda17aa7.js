(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{9446:function(e,t,n){"use strict";n.d(t,{H:function(){return $},P:function(){return j}});var r=n(7896),o=n(5445),i=n(2784),a=n(9740),l=n(5632),s=n(5631),c=n(423),d=n(891),u=n(5273),g=n(5703),p=n(1511),m=n(5893),h=n(9097);const f=()=>{var e;const{spacing:t}=(0,o.Fg)(),{adminConfig:n}=(0,g.jf)();return null!==(e=n.components)&&void 0!==e&&e.Logo?(0,o.tZ)(n.components.Logo,null):(0,o.tZ)(o.H3,null,(0,o.tZ)(h.default,{href:"/",passHref:!0},(0,o.tZ)("a",{css:{backgroundImage:"linear-gradient(to right, #0ea5e9, #6366f1)",backgroundClip:"text",lineHeight:"1.75rem",color:"transparent",verticalAlign:"middle",transition:"color 0.3s ease",textDecoration:"none"}},(0,o.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 220 220",css:{display:"inline-block",width:"2rem",height:"2rem",margin:`0  ${t.medium}px ${t.xsmall}px 0`,verticalAlign:"middle"}},(0,o.tZ)("defs",null,(0,o.tZ)("linearGradient",{id:"logo-a",x1:"0%",x2:"50%",y1:"0%",y2:"71.9%"},(0,o.tZ)("stop",{offset:"0%",stopColor:"#5AE8FA"}),(0,o.tZ)("stop",{offset:"100%",stopColor:"#2684FF"}))),(0,o.tZ)("path",{fill:"url(#logo-a)",fillRule:"evenodd",d:"M290.1 47h117.5c17.8 0 24.3 1.9 30.8 5.3a36.3 36.3 0 0115.1 15.2c3.5 6.5 5.4 13 5.4 30.8v117.4c0 17.9-1.9 24.3-5.4 30.8a36.3 36.3 0 01-15.1 15.2c-6.5 3.4-13 5.3-30.8 5.3H290c-17.8 0-24.3-1.9-30.8-5.3a36.3 36.3 0 01-15.1-15.2c-3.5-6.5-5.3-13-5.3-30.8V98.3c0-17.9 1.8-24.3 5.3-30.8a36.3 36.3 0 0115.1-15.2c6.5-3.4 13-5.3 30.8-5.3zm11.8 56.8V218H327v-36.8l14.4-14.6 34.4 51.4h31.5l-49-69.1 44.7-45.1h-31.3L327 151v-47.3H302z",transform:"translate(-238.9 -47)"})),"Keystone 6")))},Z=["children"],b=e=>{let{href:t,children:n,isSelected:r}=e;const{colors:i,palette:a,spacing:s,radii:c,typography:d}=(0,o.Fg)(),u=(0,l.useRouter)(),g=void 0!==r?r:u.pathname===t;return(0,o.tZ)("li",null,(0,o.tZ)(p.rU,{"aria-current":!!g&&"location",href:t,css:{background:"transparent",borderBottomRightRadius:c.xsmall,borderTopRightRadius:c.xsmall,color:a.neutral700,display:"block",fontWeight:d.fontWeight.medium,marginBottom:s.xsmall,marginRight:s.xlarge,padding:`${s.small}px ${s.xlarge}px`,position:"relative",textDecoration:"none",":hover":{background:i.backgroundHover,color:i.linkHoverColor},"&[aria-current=location]":{background:a.neutral200,color:a.neutral900}}},n))},y=e=>{let{item:t}=e;const{apiPath:n}=(0,g.jf)(),{spacing:i,typography:a}=(0,o.Fg)();return(0,o.tZ)("div",{css:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between",margin:i.xlarge,marginBottom:0}},t&&"authenticated"===t.state?(0,o.tZ)("div",{css:{fontSize:a.fontSize.small}},"Signed in as ",(0,o.tZ)("strong",null,t.label)):(0,o.tZ)("div",{css:{fontSize:a.fontSize.small}},"GraphQL Playground and Docs"),(0,o.tZ)(c.J2,{placement:"bottom",triggerRenderer:e=>{let{triggerProps:t}=e;return(0,o.tZ)(s.zx,(0,r.Z)({size:"small",style:{padding:0,width:36},"aria-label":"Links and signout"},t),(0,o.tZ)(d.x,null))}},(0,o.tZ)(o.Kq,{gap:"medium",padding:"large",dividers:"between"},(0,o.tZ)(v,{target:"_blank",href:n},"API Explorer"),(0,o.tZ)(v,{target:"_blank",href:"https://github.com/keystonejs/keystone"},"GitHub Repository"),(0,o.tZ)(v,{target:"_blank",href:"https://keystonejs.com"},"Keystone Documentation"),t&&"authenticated"===t.state&&(0,o.tZ)(m.S,null))))},v=e=>{let{children:t}=e,n=(0,a.Z)(e,Z);const{typography:i}=(0,o.Fg)();return(0,o.tZ)("a",(0,r.Z)({css:{alignItems:"center",display:"flex",fontSize:i.fontSize.small,textDecoration:"none"}},n),t,(0,o.tZ)(u.X,{size:"small"}))},x=e=>{let{authenticatedItem:t,children:n}=e;const{spacing:r}=(0,o.Fg)();return(0,o.tZ)("div",{css:{display:"flex",flexDirection:"column",justifyContent:"center",position:"relative"}},(0,o.tZ)(y,{item:t}),(0,o.tZ)("nav",{role:"navigation","aria-label":"Side Navigation",css:{marginTop:r.xlarge}},(0,o.tZ)("ul",{css:{padding:0,margin:0,li:{listStyle:"none"}}},n)))},k=e=>{let{list:t}=e;const n=(0,l.useRouter)();return(0,o.tZ)(b,{isSelected:n.pathname.split("/")[1]===`/${t.path}`.split("/")[1],href:`/${t.path}`},t.label)},C=e=>{let{lists:t=[],include:n=[]}=e;const r=n.length>0?t.filter((e=>n.includes(e.key))):t;return(0,o.tZ)(i.Fragment,null,r.map((e=>(0,o.tZ)(k,{key:e.key,list:e}))))},w=()=>{var e;const{adminMeta:{lists:t},adminConfig:n,authenticatedItem:r,visibleLists:i}=(0,g.jf)();if("loading"===i.state)return null;if("error"===i.state)return(0,o.tZ)(o.xv,{as:"span",paddingLeft:"xlarge",css:{color:"red"}},i.error instanceof Error?i.error.message:i.error[0].message);const a=Object.keys(t).map((e=>i.lists.has(e)?t[e]:null)).filter((e=>Boolean(e)));return null!==n&&void 0!==n&&null!==(e=n.components)&&void 0!==e&&e.Navigation?(0,o.tZ)(n.components.Navigation,{authenticatedItem:r,lists:a}):(0,o.tZ)(x,{authenticatedItem:r},(0,o.tZ)(b,{href:"/"},"Dashboard"),(0,o.tZ)(C,{lists:a}))},$=80,R=e=>(0,o.tZ)(i.Fragment,null,(0,o.tZ)("style",null,"body { overflow: hidden; }"),(0,o.tZ)("div",(0,r.Z)({css:{display:"grid",gridTemplateColumns:"minmax(300px, 1fr) 4fr",gridTemplateRows:`${$}px auto`,height:"100vh"}},e))),F=e=>(0,o.tZ)("aside",(0,r.Z)({css:{minWidth:0,overflowY:"auto",WebkitOverflowScrolling:"touch"}},e)),S=e=>{const{colors:t,spacing:n}=(0,o.Fg)();return(0,o.tZ)("main",(0,r.Z)({css:{backgroundColor:t.background,boxSizing:"border-box",minWidth:0,paddingLeft:n.xlarge,paddingRight:n.xlarge,overflowY:"auto",WebkitOverflowScrolling:"touch",position:"relative"}},e))},j=e=>{let{children:t,header:n,title:r}=e;const{colors:i,spacing:a}=(0,o.Fg)();return(0,o.tZ)(R,null,(0,o.tZ)("div",{css:{alignItems:"center",borderBottom:`1px solid ${i.border}`,display:"flex",justifyContent:"space-between",paddingLeft:a.xlarge,paddingRight:a.xlarge}},(0,o.tZ)(f,null)),(0,o.tZ)("header",{css:{alignItems:"center",backgroundColor:i.background,borderBottom:`1px solid ${i.border}`,display:"flex",justifyContent:"space-between",minWidth:0,paddingLeft:a.xlarge,paddingRight:a.xlarge}},(0,o.tZ)("title",null,r?`Keystone - ${r}`:"Keystone"),n),(0,o.tZ)(F,null,(0,o.tZ)(w,null)),(0,o.tZ)(S,null,t))}},8752:function(e,t,n){"use strict";n.d(t,{p:function(){return i}});var r=n(2784),o=n(7074);n(5445);const i=(0,o.c)(r.createElement(r.Fragment,null,r.createElement("line",{x1:12,y1:5,x2:12,y2:19}),r.createElement("line",{x1:5,y1:12,x2:19,y2:12})),"PlusIcon")},1491:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5384)}])},5384:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var r=n(7896),o=n(2784),i=n(5445),a=n(8752),l=n(4141),s=n(6759),c=n(7078),d=(n(3080),n(9378),n(5812)),u=n(9446),g=n(81),p=n(1964),m=n(5703),h=n(1511),f=n(5632);n(5364),n(7286),n(2480),n(3900),n(5631),n(423),n(891),n(5273),n(5893),n(9097),n(2881),n(6172),n(7668),n(7532),n(2180),n(1168),n(5976),n(581),n(1596);const Z=e=>{let{listKey:t,count:n,hideCreate:r}=e;const{colors:c,palette:u,radii:g,spacing:p}=(0,i.Fg)(),Z=(0,m.sm)(t),[y,v]=(0,o.useState)(!1),x=(0,f.useRouter)();return(0,i.tZ)("div",{css:{position:"relative"}},(0,i.tZ)(h.rU,{href:`/${Z.path}`,css:{backgroundColor:c.background,borderColor:c.border,borderRadius:g.medium,borderWidth:1,display:"inline-block",minWidth:280,padding:p.large,textDecoration:"none",":hover":{borderColor:u.blue400},":hover h3":{textDecoration:"underline"}}},(0,i.tZ)("h3",{css:{margin:`0 0 ${p.small}px 0`}},Z.label," "),"success"===n.type?(0,i.tZ)("span",{css:{color:c.foreground,textDecoration:"none"}},n.count," item",1!==n.count?"s":""):"error"===n.type?n.message:"loading"===n.type?(0,i.tZ)(s.xg,{label:`Loading count of ${Z.plural}`,size:"small",tone:"passive"}):"No access"),!1===r&&(0,i.tZ)(b,{title:`Create ${Z.singular}`,disabled:y,onClick:()=>{v(!0)}},(0,i.tZ)(a.p,{size:"large"}),(0,i.tZ)(i.TX,null,"Create ",Z.singular)),(0,i.tZ)(l.tW,{isOpen:y},(0,i.tZ)(d.C,{listKey:Z.key,onCreate:e=>{let{id:t}=e;x.push(`/${Z.path}/${t}`)},onClose:()=>{v(!1)}})))},b=e=>{const t=(0,i.Fg)();return(0,i.tZ)("button",(0,r.Z)({css:{alignItems:"center",backgroundColor:t.palette.neutral400,border:0,borderRadius:t.radii.xsmall,color:"white",cursor:"pointer",display:"flex",height:32,justifyContent:"center",outline:0,position:"absolute",right:t.spacing.large,top:t.spacing.large,transition:"background-color 80ms linear",width:32,"&:hover, &:focus":{backgroundColor:t.tones.positive.fill[0]}}},e))},y=()=>{const{adminMeta:{lists:e},visibleLists:t}=(0,m.jf)(),n=(0,o.useMemo)((()=>g.Ps`
    query {
      keystone {
        adminMeta {
          lists {
            key
            hideCreate
          }
        }
      }
      ${Object.entries(e).map((e=>{let[t,n]=e;return`${t}: ${n.gqlNames.listQueryCountName}`})).join("\n")}
    }`),[e]);let{data:r,error:a}=(0,p.a)(n,{errorPolicy:"all"});const l=(0,c.m)(r,null===a||void 0===a?void 0:a.graphQLErrors);return(0,i.tZ)(u.P,{header:(0,i.tZ)(i.X6,{type:"h3"},"Dashboard")},"loading"===t.state?(0,i.tZ)(i.M5,{css:{height:`calc(100vh - ${u.H}px)`}},(0,i.tZ)(s.xg,{label:"Loading lists",size:"large",tone:"passive"})):(0,i.tZ)(i.gF,{as:"ul",gap:"large",paddingY:"xlarge",css:{paddingLeft:"0px",marginBottom:"0px"}},"error"===t.state?(0,i.tZ)("span",{css:{color:"red"}},t.error instanceof Error?t.error.message:t.error[0].message):Object.keys(e).map((e=>{var n,o;if(!t.lists.has(e))return null;const a=l.get(e);return(0,i.tZ)(Z,{count:r?a.errors?{type:"error",message:a.errors[0].message}:{type:"success",count:r[e]}:{type:"loading"},hideCreate:null!==(n=null===r||void 0===r||null===(o=r.keystone.adminMeta.lists.find((t=>t.key===e)))||void 0===o?void 0:o.hideCreate)&&void 0!==n&&n,key:e,listKey:e})}))))}}},function(e){e.O(0,[888,774,179],(function(){return t=1491,e(e.s=t);var t}));var t=e.O();_N_E=t}]);